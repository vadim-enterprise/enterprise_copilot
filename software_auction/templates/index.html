{% load static %}
<!DOCTYPE html>
{% csrf_token %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToolsHub</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    
    <!-- JavaScript Dependencies -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    <script src="https://d3js.org/d3-geo.v3.min.js"></script>
    <script src="{% static 'js/tiles.js' %}"></script>
</head>
<body>
    <div id="notification-container" class="notification-container"></div>
    
    <!-- Main Content Area -->
    <main class="main-content">
        <!-- US Map Container -->
        <div class="map-container">
            <!-- Tile 1: Churn Analysis -->
            <div class="map-section">
                <div class="map-section-header">Churn Analysis</div>
                <div class="map-section-content">
                    <div id="churn-map"></div>
                </div>
            </div>

            <!-- Tile 2: Competitor Analysis -->
            <div class="map-section">
                <div class="map-section-header">Competitor Analysis</div>
                <div class="map-section-content">
                    <div id="competitor-map"></div>
                </div>
            </div>

            <!-- Tile 3: Market Share -->
            <div class="map-section">
                <div class="map-section-header">Market Share</div>
                <div class="map-section-content">
                    <div id="market-share-map"></div>
                </div>
            </div>

            <!-- Tile 4: Sales Performance -->
            <div class="map-section">
                <div class="map-section-header">Sales Performance</div>
                <div class="map-section-content">
                    <div id="sales-map"></div>
                </div>
            </div>

            <!-- Tile 5: Customer Satisfaction -->
            <div class="map-section">
                <div class="map-section-header">Customer Satisfaction</div>
                <div class="map-section-content">
                    <div id="satisfaction-map"></div>
                </div>
            </div>

            <!-- Tile 6: Growth Opportunities -->
            <div class="map-section">
                <div class="map-section-header">Growth Opportunities</div>
                <div class="map-section-content">
                    <div id="growth-map"></div>
                </div>
            </div>

            <!-- Tile 7: Revenue Analysis -->
            <div class="map-section">
                <div class="map-section-header">Revenue Analysis</div>
                <div class="map-section-content">
                    <div id="revenue-map"></div>
                </div>
            </div>

            <!-- Tile 8: Product Performance -->
            <div class="map-section">
                <div class="map-section-header">Product Performance</div>
                <div class="map-section-content">
                    <div id="product-map"></div>
                </div>
            </div>

            <!-- Tile 9: Customer Demographics -->
            <div class="map-section">
                <div class="map-section-header">Customer Demographics</div>
                <div class="map-section-content">
                    <div id="demographics-map"></div>
                </div>
            </div>

            <!-- Tile 10: Market Trends -->
            <div class="map-section">
                <div class="map-section-header">Market Trends</div>
                <div class="map-section-content">
                    <div id="trends-map"></div>
                </div>
            </div>

            <!-- Tile 11: Regional Analysis -->
            <div class="map-section">
                <div class="map-section-header">Regional Analysis</div>
                <div class="map-section-content">
                    <div id="regional-map"></div>
                </div>
            </div>

            <!-- Tile 12: Competitive Landscape -->
            <div class="map-section">
                <div class="map-section-header">Competitive Landscape</div>
                <div class="map-section-content">
                    <div id="landscape-map"></div>
                </div>
            </div>
        </div>

        <!-- Search Results Window -->
        <div class="search-results-window" id="searchResultsWindow">
            <div class="search-results-header">
                <h3 class="search-results-title">Search Results</h3>
                <button class="search-results-close">&times;</button>
            </div>
            <div class="search-results-content"></div>
        </div>

        <!-- Centered Search -->
        <div class="search-container">
            <div class="search-box">
                <input type="text" id="webSearchInput" placeholder="Search something...">
                <button id="webSearchButton" type="button">
                    <span class="search-icon">üîç</span>
                </button>
                <button id="uploadCsvButton" type="button" title="Upload CSV">
                    <span class="upload-icon">üìÅ</span>
                </button>
                <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
            </div>
        </div>
    </main>

    <!-- Chatbot Widget -->
    <div id="chatbot-widget" class="chatbot-widget">
        <div class="chatbot-header">
            <h3>AI Assistant</h3>
            <button class="chatbot-toggle">‚àí</button>
        </div>
        <div class="chatbot-body">
            <div class="chatbot-messages"></div>
            <div class="chatbot-input">
                <input type="text" placeholder="Type your message...">
                <button class="voice-bot-toggle" title="Toggle Voice Mode">üé§</button>
                <button class="mic-button" title="Start/Stop Recording" style="display: none;">üéôÔ∏è</button>
                <button class="send-button">Send</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="{% static 'js/search.js' %}"></script>
    <script src="{% static 'js/chatbot.js' %}"></script>
    <script src="{% static 'js/speech_manager.js' %}"></script>
    <script src="{% static 'js/file_upload.js' %}"></script>
    <script src="{% static 'js/map_visualization.js' %}"></script>
</body>
</html>