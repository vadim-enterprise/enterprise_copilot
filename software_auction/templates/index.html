{% load static %}
<!DOCTYPE html>
{% csrf_token %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToolsHub</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/analytics.css' %}">
    
    <!-- JavaScript Dependencies -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    <script src="https://d3js.org/d3-geo.v3.min.js"></script>
    <script src="{% static 'js/tiles.js' %}"></script>
</head>
<body>
    <div id="notification-container" class="notification-container"></div>
    
    <!-- Main Content Area -->
    <main class="main-content">
        <!-- US Map Container -->
        <div class="map-container">
            <!-- Generic Tiles - Will be populated by tiles.js -->
            <div class="map-section" id="tile-1">
                <div class="map-section-header"></div>
                <div class="map-section-content"></div>
            </div>
            <div class="map-section" id="tile-2">
                <div class="map-section-header"></div>
                <div class="map-section-content"></div>
            </div>
            <div class="map-section" id="tile-3">
                <div class="map-section-header"></div>
                <div class="map-section-content"></div>
            </div>
            <div class="map-section" id="tile-4">
                <div class="map-section-header"></div>
                <div class="map-section-content"></div>
            </div>
            <div class="map-section" id="tile-5">
                <div class="map-section-header"></div>
                <div class="map-section-content"></div>
            </div>
            <div class="map-section" id="tile-6">
                <div class="map-section-header"></div>
                <div class="map-section-content"></div>
            </div>
            <div class="map-section" id="tile-7">
                <div class="map-section-header"></div>
                <div class="map-section-content"></div>
            </div>
            <div class="map-section" id="tile-8">
                <div class="map-section-header"></div>
                <div class="map-section-content"></div>
            </div>
            <div class="map-section" id="tile-9">
                <div class="map-section-header"></div>
                <div class="map-section-content"></div>
            </div>
            <div class="map-section" id="tile-10">
                <div class="map-section-header"></div>
                <div class="map-section-content"></div>
            </div>
            <div class="map-section" id="tile-11">
                <div class="map-section-header"></div>
                <div class="map-section-content"></div>
            </div>
            <div class="map-section" id="tile-12">
                <div class="map-section-header"></div>
                <div class="map-section-content"></div>
            </div>
        </div>

        <!-- Search Results Window -->
        <div class="search-results-window" id="searchResultsWindow">
            <div class="search-results-header">
                <h3 class="search-results-title">Search Results</h3>
                <button class="search-results-close">&times;</button>
            </div>
            <div class="search-results-content"></div>
        </div>

        <!-- Centered Search -->
        <div class="search-container">
            <div class="search-box">
                <input type="text" id="webSearchInput" placeholder="Search something...">
                <button id="webSearchButton" type="button">
                    <span class="search-icon">üîç</span>
                </button>
                <button id="uploadCsvButton" type="button" title="Upload CSV">
                    <span class="upload-icon">üìÅ</span>
                </button>
                <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
            </div>
        </div>
    </main>

    <!-- Chatbot Widget -->
    <div id="chatbot-widget" class="chatbot-widget">
        <div class="chatbot-header">
            <h3>AI Assistant</h3>
            <button class="chatbot-toggle">‚àí</button>
        </div>
        <div class="chatbot-body">
            <div class="chatbot-messages"></div>
            <div class="chatbot-input">
                <input type="text" placeholder="Type your message...">
                <button class="voice-bot-toggle" title="Toggle Voice Mode">üé§</button>
                <button class="mic-button" title="Start/Stop Recording" style="display: none;">üéôÔ∏è</button>
                <button class="send-button">Send</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="{% static 'js/search.js' %}"></script>
    <script src="{% static 'js/chatbot.js' %}"></script>
    <script src="{% static 'js/speech_manager.js' %}"></script>
    <script src="{% static 'js/file_upload.js' %}"></script>
    <script src="{% static 'js/map_visualization.js' %}"></script>
    <script src="{% static 'js/analytics_search.js' %}"></script>
</body>
</html>